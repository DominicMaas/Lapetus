(this.webpackJsonpganymede=this.webpackJsonpganymede||[]).push([[0],{104:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),l=a.n(c),o=(a(94),a(95),a(14)),i=(a(96),a(143)),u=a(156),s=a(157),m=a(77),h=a.n(m),f=a(78),p=a.n(f),b=a(43),d=a.n(b),E=a(59),v=a(70),g=a(161),y=a(105),j=a(147),O=a(148),w=a(149),S=a(150),k=a(151),C=a(152),N=a(153),x=a(106),T=a(113),I=a(111),P=a(162),F=a(109),B=a(154),L=a(155),R=a(160),z=a(74),M=a.n(z),U=Object(i.a)((function(e){return Object(g.a)({formControl:{width:"100%",marginBottom:e.spacing(3)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},appBar:{display:"relative"},title:{marginLeft:e.spacing(2),flex:1},img:{display:"Block",objectFit:"contain",width:"100%"}})})),A=function e(t,a){Object(v.a)(this,e),this.value=void 0,this.choices=void 0,this.value=t,this.choices=a},J=0;var D=function(){var e=U(),t=r.a.useState(!0),a=Object(o.a)(t,2),c=a[0],l=a[1],i=r.a.useState(),u=Object(o.a)(i,2),s=u[0],m=u[1],h=r.a.useState("?"),f=Object(o.a)(h,2),p=f[0],b=f[1],v=r.a.useState(new A("",[""])),g=Object(o.a)(v,2),z=g[0],D=g[1],H=r.a.useState(new A("",[""])),V=Object(o.a)(H,2),X=V[0],_=V[1],q=r.a.useState(new A("",[""])),G=Object(o.a)(q,2),K=G[0],Q=G[1],W=r.a.useState("5"),Y=Object(o.a)(W,2),Z=Y[0],$=Y[1],ee=r.a.useState("10"),te=Object(o.a)(ee,2),ae=te[0],ne=te[1],re=r.a.useState(!1),ce=Object(o.a)(re,2),le=ce[0],oe=ce[1],ie=r.a.useState("Stop"),ue=Object(o.a)(ie,2),se=ue[0],me=ue[1],he=r.a.useState(!1),fe=Object(o.a)(he,2),pe=fe[0],be=fe[1],de=r.a.useState(""),Ee=Object(o.a)(de,2),ve=Ee[0],ge=Ee[1];Object(n.useEffect)((function(){c||(l(!0),fetch("http://raspberrypi:8080/set-config-item/iso",{method:"POST",body:z.value}).then((function(e){l(!1)})).catch((function(e){m(e),l(!1)})))}),[z]),Object(n.useEffect)((function(){c||(l(!0),fetch("http://raspberrypi:8080/set-config-item/shutterspeed",{method:"POST",body:X.value}).then((function(e){l(!1)})).catch((function(e){m(e),l(!1)})))}),[X]),Object(n.useEffect)((function(){c||(l(!0),fetch("http://raspberrypi:8080/set-config-item/f-number",{method:"POST",body:K.value}).then((function(e){l(!1)})).catch((function(e){m(e),l(!1)})))}),[K]),Object(n.useEffect)((function(){ye()}),[]);var ye=function(){l(!0);var e=fetch("http://raspberrypi:8080/get-config-item/iso").then((function(e){return e.json()})).then((function(e){var t=new A(e.value,e.choices);D(t)})).catch((function(e){m("The camera is not connected, or the device is not on!")})),t=fetch("http://raspberrypi:8080/get-config-item/shutterspeed").then((function(e){return e.json()})).then((function(e){var t=new A(e.value,e.choices);_(t)})).catch((function(e){m("The camera is not connected, or the device is not on!")})),a=fetch("http://raspberrypi:8080/get-config-item/f-number").then((function(e){return e.json()})).then((function(e){var t=new A(e.value,e.choices);Q(t)})).catch((function(e){m("The camera is not connected, or the device is not on!")})),n=fetch("http://raspberrypi:8080/get-config-item/focallength").then((function(e){return e.json()})).then((function(e){var t=500/parseFloat(e.value);b(Math.round(t)+"")})).catch((function(){b("???")}));Promise.all([e,t,a,n]).then((function(){l(!1)}))},je=function(){var e=Object(E.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!le){e.next=4;break}return J=Number.MAX_VALUE,oe(!1),e.abrupt("return");case 4:return oe(!0),J=0,t=function(){var e=Object(E.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(J>=Number.parseInt(ae))){e.next=3;break}return oe(!1),e.abrupt("return");case 3:return me("Stop ("+(J+1)+"/"+Number.parseInt(ae)+")"),e.prev=4,e.next=7,fetch("http://raspberrypi:8080/capture-image",{method:"POST"});case 7:l(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),m(e.t0),l(!1);case 14:J++,setTimeout(t,1e3*Number.parseFloat(Z));case 16:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}(),e.next=9,t();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oe=function(){be(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{className:e.backdrop,open:c},r.a.createElement(j.a,{color:"inherit"})),r.a.createElement(O.a,{fullScreen:!0,open:pe,onClose:Oe},r.a.createElement(w.a,{className:e.appBar},r.a.createElement(S.a,null,r.a.createElement(k.a,{edge:"start",color:"inherit",onClick:Oe,"aria-label":"close"},r.a.createElement(M.a,null)),r.a.createElement(C.a,{variant:"h6",className:e.title},"Image Preview"))),r.a.createElement("br",null)," ",r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("br",null)," ",r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("img",{src:ve,className:e.img,alt:"Preview Image"})),r.a.createElement(w.a,{position:"static"},r.a.createElement(S.a,null,r.a.createElement(C.a,{variant:"h6"},"Night Photography"))),r.a.createElement("br",null),r.a.createElement(N.a,null,s?r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{severity:"error"},s),r.a.createElement("br",null)):"",r.a.createElement(x.a,{className:e.formControl,variant:"standard"},r.a.createElement(T.a,{id:"select-iso-label"},"ISO"),r.a.createElement(I.a,{labelId:"select-iso-label",id:"select-iso",value:null===z||void 0===z?void 0:z.value,onChange:function(e){return D(new A(e.target.value,z.choices))}},null===z||void 0===z?void 0:z.choices.map((function(e){return r.a.createElement(P.a,{key:e,value:e},e)})))),r.a.createElement(x.a,{className:e.formControl,variant:"standard"},r.a.createElement(T.a,{id:"select-shutter-speed-label"},"Shutter Speed"),r.a.createElement(I.a,{labelId:"select-shutter-speed-label",id:"select-shutter-speed",value:X.value,onChange:function(e){return _(new A(e.target.value,X.choices))}},null===X||void 0===X?void 0:X.choices.map((function(e){return r.a.createElement(P.a,{key:e,value:e},e)}))),r.a.createElement(F.a,null,"Recommended shutter speed of max ",p,"s (500 Rule)")),r.a.createElement(x.a,{className:e.formControl,variant:"standard"},r.a.createElement(T.a,{id:"select-f-stop-label"},"FStop"),r.a.createElement(I.a,{labelId:"select-f-stop-label",id:"select-f-stop",value:K.value,onChange:function(e){return Q(new A(e.target.value,K.choices))}}," ",null===K||void 0===K?void 0:K.choices.map((function(e){return r.a.createElement(P.a,{key:e,value:e},e)})))),r.a.createElement(x.a,{className:e.formControl,variant:"standard"},r.a.createElement(B.a,{label:"Delay (seconds)",id:"select-delay",value:Z,onChange:function(e){return $(e.target.value)}}),r.a.createElement(F.a,null,"The delay in-between each photo")),r.a.createElement(x.a,{className:e.formControl},r.a.createElement(B.a,{label:"Takes",id:"select-takes",value:ae,onChange:function(e){return ne(e.target.value)}}),r.a.createElement(F.a,null,"How many photos to take")),r.a.createElement(x.a,{className:e.formControl},r.a.createElement(L.a,{variant:"contained",color:"primary",onClick:je},le?se:"Start")),r.a.createElement(x.a,{className:e.formControl},r.a.createElement(L.a,{variant:"outlined",color:"primary",onClick:function(){l(!0),fetch("http://raspberrypi:8080/capture-preview").then((function(e){return e.blob()})).then((function(e){l(!1),be(!0),ge(URL.createObjectURL(e))})).catch((function(e){m(e),l(!1)}))}},"Capture Preview")),r.a.createElement(x.a,{className:e.formControl},r.a.createElement(L.a,{variant:"outlined",onClick:ye},"Refresh"),r.a.createElement(F.a,null,"Refresh after adjusting the camera focus or zoom"))),r.a.createElement("br",null),r.a.createElement("br",null))},H=a(54),V=a(26);var X=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{position:"static"},r.a.createElement(S.a,null,r.a.createElement(C.a,{variant:"h6"},"Manage Camera"))))},_=Object(i.a)({stickToBottom:{width:"100%",position:"fixed",bottom:0}});var q=function(){var e=r.a.useState(0),t=Object(o.a)(e,2),a=t[0],n=t[1],c=_();return r.a.createElement(H.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(V.c,null,r.a.createElement(V.a,{path:"/",exact:!0},r.a.createElement(D,null)),r.a.createElement(V.a,{path:"/night"},r.a.createElement(D,null)),r.a.createElement(V.a,{path:"/camera"},r.a.createElement(X,null))),r.a.createElement(u.a,{className:c.stickToBottom,value:a,onChange:function(e,t){n(t)},showLabels:!1},r.a.createElement(s.a,{showLabel:!1,component:H.b,to:"/night",icon:r.a.createElement(h.a,null)}),r.a.createElement(s.a,{showLabel:!1,component:H.b,to:"/camera",icon:r.a.createElement(p.a,null)}))))},G=a(159),K=a(158),Q=a(79),W=a(62),Y=a.n(W),Z=Object(Q.a)({palette:{primary:Y.a,secondary:Y.a,type:"dark"}});l.a.render(r.a.createElement(K.a,{theme:Z},r.a.createElement(G.a,null),r.a.createElement(q,null)),document.getElementById("root"))},89:function(e,t,a){e.exports=a(104)},95:function(e,t,a){},96:function(e,t,a){}},[[89,1,2]]]);
//# sourceMappingURL=main.bf75b719.chunk.js.map